<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <main class="page auth-page login-page">
        <section class="login-stage reveal">
            <div class="login-backdrop"></div>
            <div class="login-logo-mark" aria-label="Feedback logo">
                <svg viewBox="0 0 64 64" role="img" aria-hidden="true">
                    <path d="M10 14c0-4.4 3.6-8 8-8h28c4.4 0 8 3.6 8 8v20c0 4.4-3.6 8-8 8H28l-10 9c-1.3 1.1-3.3.2-3.3-1.5V42C12 41 10 37.8 10 34V14z" fill="rgba(255,255,255,0.22)" stroke="rgba(255,255,255,0.9)" stroke-width="2"/>
                    <path d="M23 25l7 7 13-13" fill="none" stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="login-copy">
                <h1>FeedSmart</h1>
                <p>Collect feedback faster with a clean workflow and clear summaries.</p>
                <ul class="login-points">
                    <li>Public share links</li>
                    <li>Anonymous and identified tracking</li>
                    <li>Instant response insights</li>
                </ul>
            </div>

            <article class="login-panel login-overlay reveal delay-1">
                <div class="login-panel-head">
                    <h2>Welcome Back</h2>
                    <button type="button" class="btn btn-secondary login-theme-btn" onclick="toggleTheme()">Theme</button>
                </div>
                <p class="hint">Sign in to continue to your feedback workspace.</p>

                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert {{ 'alert-error' if category == 'error' else 'alert-success' }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <form method="post" class="form-shell">
                    <div class="field">
                        <label for="username">Username</label>
                        <input id="username" name="username" placeholder="Enter your username" autocomplete="username" required>
                    </div>
                    <div class="field">
                        <label for="password">Password</label>
                        <div class="password-row">
                            <input id="password" type="password" name="password" placeholder="Enter your password" autocomplete="current-password" required>
                            <button type="button" class="btn btn-secondary toggle-pass-btn" onclick="togglePassword()">Show</button>
                        </div>
                    </div>
                    <div class="actions">
                        <button type="submit" class="btn btn-primary">Login</button>
                        <a href="/register" class="btn btn-secondary">Create account</a>
                    </div>
                </form>
            </article>
        </section>
    </main>

<script>
function applyTheme(mode) {
    document.body.classList.toggle('dark-theme', mode === 'dark');
    const themeBtn = document.querySelector('.login-theme-btn');
    if (themeBtn) themeBtn.textContent = mode === 'dark' ? 'Light Mode' : 'Dark Mode';
}

function toggleTheme() {
    const current = localStorage.getItem('theme') === 'dark' ? 'dark' : 'light';
    const next = current === 'dark' ? 'light' : 'dark';
    localStorage.setItem('theme', next);
    applyTheme(next);
}

function togglePassword() {
    const input = document.getElementById('password');
    const button = document.querySelector('.toggle-pass-btn');
    if (!input || !button) return;
    const nextType = input.type === 'password' ? 'text' : 'password';
    input.type = nextType;
    button.textContent = nextType === 'password' ? 'Show' : 'Hide';
}

applyTheme(localStorage.getItem('theme') === 'dark' ? 'dark' : 'light');
</script>
</body>
</html>

